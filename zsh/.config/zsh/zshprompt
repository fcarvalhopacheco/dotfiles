#!/usr/bin/env zsh
# zmodload zsh/zprof

#
#‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
#
#
#      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó
#      ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù
#      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ñà‚ñà‚ïî‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù   ‚ñà‚ñà‚ïë   
#      ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïù ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïù    ‚ñà‚ñà‚ïë   
#      ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë ‚ïö‚ïê‚ïù ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë        ‚ñà‚ñà‚ïë   
#      ‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù        ‚ïö‚ïê‚ïù   
#
#        GitHub:  https://github.com/fcarvalhopacheco
#                                                           
#   References:
#       - https://zsh-prompt-generator.site
#       - https://dev.to/cassidoo/customizing-my-zsh-prompt-3417
#       - Colors: https://github.com/zsh-users/zsh/blob/master/Functions/Misc/colors
#       - Symbols: https://symbl.cc/en/
#       - vcs_info : https://github.com/zsh-users/zsh/blob/master/Misc/vcs_info-examples
#
#
#   *This script is based on code from https://github.com/zap-zsh, 
#   which is licensed under the GNU GPL v3.0. The original code can be 
#   found at: https://github.com/zap-zsh/atmachine-prompt/blob/master/atmachine-prompt.zsh-theme 
#
#‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà

# Loadthe Version Control System into your prompt
# autoload -Uz vcs_info
# autoload -U colors && colors
#
# zstyle ':vcs_info:*' enable git 
#
# precmd_vcs_info() { vcs_info }
# precmd_functions+=( precmd_vcs_info )
# setopt prompt_subst
#
# zstyle ':vcs_info:git*+set-message:*' hooks git-untracked
# # 
# +vi-git-untracked(){
#     if [[ $(git rev-parse --is-inside-work-tree 2> /dev/null) == 'true' ]] && \
#         git status --porcelain | grep '??' &> /dev/null ; then
#         hook_com[staged]+='!' # NEWFILES
#     fi
# }
#
# ##############################################################################
# # %s : The current version control system, like git or svn.
# # %r : The name of the root directory of the repository
# # %S : The current path relative to the repository root directory
# # %b : Branch information, like master
# # %m : In case of Git, show information about stashes
# # %u : Show unstaged changes in the repository
# # %c : Show staged changes in the repository
# ##############################################################################
# zstyle ':vcs_info:*' check-for-changes true
# zstyle ':vcs_info:git:*' formats " %{$fg[blue]%}(%{$fg[red]%}%m%u%c%{$fg[yellow]%}Óú•%{$fg[magenta]%} %b%{$fg[green]%})"
#
# PROMPT="%B%{$fg[blue]%}[%{$fg[white]%}%n%{$fg[yellow]%}@%{$fg[white]%}%m%{$fg[blue]%}] %(?:%{$fg_bold[green]%}üèÑ :%{$fg_bold[magenta]%}‚ûú )%{$fg[cyan]%}%c%{$reset_color%}"
# PROMPT+="\$vcs_info_msg_0_ "
# #zprof
#

# Set prompt options
# source /Users/fcp/.dotfiles/zsh/.config/zsh/scripts/git-prompt.sh
# setopt prompt_subst
# autoload -U colors && colors
#
# # Git prompt customization
# GIT_PS1_SHOWDIRTYSTATE=1
# GIT_PS1_SHOWSTASHSTATE=1
# GIT_PS1_SHOWUNTRACKEDFILES=1
# GIT_PS1_SHOWUPSTREAM="auto"
# GIT_PS1_SHOWCOLORHINTS=1
#
# # # # Define the precmd function
# precmd() {
#     __git_ps1 "%B%{$fg[blue]%}[%{$fg[white]%}%n%{$fg[yellow]%}@%{$fg[white]%}%m%{$fg[blue]%}] %(?:%{$fg_bold[green]%}üèÑ :%{$fg_bold[magenta]%}‚ûú )%{$fg[cyan]%}%c%{$reset_color%}" " %B%{$reset_color%}" " (%s)"
# }

# Source the git-prompt script
source /Users/fcp/.dotfiles/zsh/.config/zsh/scripts/git-prompt.sh

# Enable prompt substitution for dynamic content
setopt prompt_subst

# Load colors for styling the prompt
autoload -U colors && colors

# Git prompt customizations for minimal impact
GIT_PS1_SHOWDIRTYSTATE=1        # Show '*' if there are unstaged changes
GIT_PS1_SHOWSTASHSTATE=0        # Disable showing stashes for performance
GIT_PS1_SHOWUNTRACKEDFILES=0    # Disable showing untracked files for performance
GIT_PS1_SHOWUPSTREAM="auto"     # Show tracking branch differences
GIT_PS1_SHOWCOLORHINTS=0        # Disable colored hints for performance

# Define the precmd function to update the prompt before each command
precmd() {
    # Define prompt elements for user, host, and current directory
    local user_host="%B%{$fg[blue]%}[%{$fg[white]%}%n%{$fg[yellow]%}@%{$fg[white]%}%m%{$fg[blue]%}]"
    local status_symbol="%(?:%{$fg_bold[green]%}üèÑ :%{$fg_bold[magenta]%}‚ûú )"
    local current_dir="%{$fg[cyan]%}%c%{$reset_color%}"

    # Set the prompt with the Git status integrated directly
    PS1="$user_host $status_symbol $current_dir$(__git_ps1 ' (%s)') %B%{$reset_color%}"
}

# Register the precmd function to be called before each command execution
autoload -Uz add-zsh-hook
add-zsh-hook precmd precmd

